{"version":3,"sources":["../src/token.js"],"names":["tokenConst","require","TOKEN_ID","Token","tokenIndex","value","me","id","is","Array","isArray","b","iii","b1","b2","undefined","isNot","apply","arguments","expected","msg","name","Error","unexpected","NAMES","toString","JSON","stringify","module","exports"],"mappings":"AAAA,IAAMA,aAAaC,QAAQ,eAAR,CAAnB;;AACA,IAAIC,WAAU,CAAd;;AACA,IAAMC,QAAQ,SAARA,KAAQ,CAAUC,UAAV,EAAqBC,KAArB,EAA2B;AACrC,MAAIC,KAAK,IAAT;AACAA,KAAGC,EAAH,GAAM,MAAKL,UAAX;AACAI,KAAGF,UAAH,GAAgBA,UAAhB;AACAE,KAAGD,KAAH,GAAWA,KAAX;;AACAC,KAAGE,EAAH,GAAM,UAASJ,UAAT,EAAoBC,KAApB,EAA0B;AAC5B,QAAII,MAAMC,OAAN,CAAcN,UAAd,CAAJ,EAA8B;AAC1B,UAAIO,CAAJ;AAD0B;AAAA;AAAA;;AAAA;AAE1B,6BAAiBP,UAAjB,8HAA4B;AAAA,cAAlBQ,IAAkB;AACxBD,cAAGL,GAAGE,EAAH,CAAMI,IAAN,EAAUP,KAAV,CAAH;;AACA,cAAIM,CAAJ,EAAM;AACFA,gBAAI,IAAJ;AACA;AACH;AACJ;AARyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAS1B,aAAO,CAAC,CAACA,CAAT;AACH;;AACD,QAAIE,KAAMP,GAAGF,UAAH,KAAgBA,UAA1B;AAEA,QAAIU,KAAMR,GAAGD,KAAH,KAAWA,KAAX,IAAkBA,UAAQU,SAApC;AAEA,WAAOF,MAAMC,EAAb;AACH,GAjBD;;AAkBAR,KAAGU,KAAH,GAAS,UAASZ,UAAT,EAAoBC,KAApB,EAA0B;AAC/B,QAAIC,KAAK,IAAT;AACA,WAAO,CAACA,GAAGE,EAAH,CAAMS,KAAN,CAAYX,EAAZ,EAAeY,SAAf,CAAR;AACH,GAHD;;AAIAZ,KAAGa,QAAH,GAAY,UAAUf,UAAV,EAAqBC,KAArB,EAA4B;AACpC,QAAIC,KAAK,IAAT;AACA,QAAIK,IAAIL,GAAGE,EAAH,CAAMS,KAAN,CAAYX,EAAZ,EAAeY,SAAf,CAAR;;AACA,QAAI,CAACP,CAAL,EAAO;AACH,UAAIS,MAAM,sBAAsBd,GAAGe,IAAzB,GAAgC,IAA1C;;AACA,UAAIf,GAAGD,KAAP,EAAa;AACTe,eAAK,cAAcd,GAAGD,KAAtB;AACH;;AACD,YAAM,IAAIiB,KAAJ,CAAUF,GAAV,CAAN;AACH;;AACD,WAAOT,CAAP;AACH,GAXD;;AAYAL,KAAGiB,UAAH,GAAc,UAAUnB,UAAV,EAAqBC,KAArB,EAA4B;AACtC,QAAIC,KAAK,IAAT;AACA,QAAIK,IAAIL,GAAGU,KAAH,CAASC,KAAT,CAAeX,EAAf,EAAkBY,SAAlB,CAAR;;AACA,QAAI,CAACP,CAAL,EAAO;AACH,YAAM,IAAIW,KAAJ,CAAU,sBAAqBhB,GAAGe,IAAlC,CAAN;AACH;;AACD,WAAOV,CAAP;AACH,GAPD;;AAQAL,KAAGe,IAAH,GAASrB,WAAWwB,KAAX,CAAiBpB,UAAjB,CAAT;;AACAE,KAAGmB,QAAH,GAAa,YAAY;AACrB,QAAIpB,KAAJ,EAAU;AACN,aAAO,WAASC,GAAGe,IAAZ,GAAiB,GAAjB,GAAsBK,KAAKC,SAAL,CAAetB,KAAf,CAAtB,GAA4C,IAAnD;AACH,KAFD,MAEM;AACF,aAAO,WAASC,GAAGe,IAAZ,GAAiB,KAAxB;AACH;AACJ,GAND;AAQH,CAxDD;;AA4DAO,OAAOC,OAAP,GAAiB;AACb1B;AADa,CAAjB","file":"token.js","sourcesContent":["const tokenConst = require(\"./token_const\");\r\nlet TOKEN_ID= 1;\r\nconst Token = function (tokenIndex,value){\r\n    let me = this;\r\n    me.id=100+(TOKEN_ID++);\r\n    me.tokenIndex = tokenIndex;\r\n    me.value = value;\r\n    me.is=function(tokenIndex,value){\r\n        if (Array.isArray(tokenIndex)){\r\n            let b;\r\n            for ( let iii of tokenIndex){\r\n                b =me.is(iii,value);\r\n                if (b){\r\n                    b = true;\r\n                    break;\r\n                }\r\n            }\r\n            return !!b;\r\n        }\r\n        let b1 = (me.tokenIndex===tokenIndex);\r\n\r\n        let b2 = (me.value===value||value===undefined);\r\n\r\n        return b1 && b2;\r\n    };\r\n    me.isNot=function(tokenIndex,value){\r\n        let me = this;\r\n        return !me.is.apply(me,arguments);\r\n    };\r\n    me.expected=function (tokenIndex,value) {\r\n        let me = this;\r\n        let b = me.is.apply(me,arguments) ;\r\n        if (!b){\r\n            let msg = \"not expect token \" + me.name + \"  \";\r\n            if (me.value){\r\n                msg+=\" value = \" + me.value;\r\n            }\r\n            throw new Error(msg);\r\n        }\r\n        return b;\r\n    };\r\n    me.unexpected=function (tokenIndex,value) {\r\n        let me = this;\r\n        let b = me.isNot.apply(me,arguments);\r\n        if (!b){\r\n            throw new Error(\"not expect token \" +me.name);\r\n        }\r\n        return b;\r\n    };\r\n    me.name= tokenConst.NAMES[tokenIndex];\r\n    me.toString =function () {\r\n        if (value){\r\n            return \"Token.\"+me.name+\"(\"+ JSON.stringify(value)+\");\"\r\n        }else {\r\n            return \"Token.\"+me.name+\"();\"\r\n        }\r\n    };\r\n\r\n};\r\n\r\n\r\n\r\nmodule.exports = {\r\n    Token\r\n};\r\n\r\n"]}